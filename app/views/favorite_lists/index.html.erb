<div class="container-favorite-lists">
  <div class="container-local">
    <h1>Vos listes de favoris</h1>
    <div data-controller="favorite-list-toggle">
      <% @favorite_lists.each do |favorite_list| %>
        <div>
          <div data-favorite-list-toggle-target="favoriteList" data-action="click->favorite-list-toggle#toggleCard">
            <div>
              <div class="card-favorite-list-local">
                <h5 class="card-favorite-title"><%= favorite_list.title.capitalize %></h5>
                <% if favorite_list.favorites.any? %>
                  <% random_favorite = favorite_list.favorites.sample %>
                  <%= image_tag random_favorite.meal.photo, class: 'random-favorite-image' %>
                <% end %>
                <%= button_to favorite_list_path(favorite_list), method: :delete, class:"button-delete" do %>
                  <i class="fa-solid fa-trash"></i>
                <% end %>
              </div>
              <div class="d-none" data-favorite-list-toggle-target="toggleable">
                <p><strong>Localisation:</strong> <%= favorite_list.localisation %></p>
                <% if favorite_list.favorites.any? %>
                  <h6>Plats dans cette liste :</h6>
                    <ul>
                      <% favorite_list.favorites.each do |favorite| %>
                        <li>
                          <%= link_to meal_path(favorite.meal), style: "background-image: url(#{favorite.meal.photo})" do %>
                            <div>
                              <h2><%= favorite.meal.name %></h2>
                            </div>
                          <% end %>
                          <%= button_to favorite_list_favorite_path(favorite_list, favorite), method: :delete, turbo: false, class:"button-delete" do %>
                            <i class="fa-solid fa-trash"></i>
                          <% end %>
                        </li>
                      <% end %>
                    </ul>
                <% else %>
                  <p>Votre liste est vide!</p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
